{% if form.errors %}
    {{ form.errors }}
{% endif %}

<div class="container-fluid form-card">
    <form action="/admin" method="POST" role="form" id="addEntryForm" name="addEntryForm">
        {{ form.csrf_token }}

        <h3>Episode</h3>
        <br>
        <div class="row">
            <div class="col-4">
                {{ form.ep_num.label }}
                {{ form.ep_num(class_ = "form-control", value=episodes[0].ep_num+1) }}  <!-- Default value: next episode number -->
            </div>
            <div class="col-4">
                <label for="date-id">Date</label>
                <input type="date" name="date" id="date-id" value="{{ today_date }}" class="form-control">  <!-- Default value: today's date -->
            </div>
            <div class="col-4">
                {{ form.num_items.label }}
                {{ form.num_items(class_ = "form-control") }}
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <label for="theme-id">Theme</label>
                <input type="text" name="theme" id="theme-id" class="form-control" list="theme-list">
                <datalist id="theme-list">
                    {% for theme in themes %}
                        <option value="{{ theme }}">
                    {% endfor %}
                </datalist>
            </div>
        </div>
        <br>
        <hr>
        <h3>Participants</h3>
        <div class="form-field" id="modal-participants">
            {% include 'participantsForm.html' %}
        <br>
        </div>
        <input type="button" value="Add a guest" onClick="addGuest();" class="btn btn-primary rounded-pill">

        <br>
        <div class="form-field" style="float: right;">
            {{ form.submit(class_= "btn btn-primary rounded-pill")}}
        </div> 

    </form>
</div>

<script>
    var counter = 0;
    function addGuest() {
        counter += 1;
        var form = document.getElementById('modal-participants');
        var mainDiv = document.createElement('div');
        mainDiv.className = 'row container-fluid';

        var inputDiv = document.createElement('div');
        inputDiv.className = 'form-group';
        var nameInput = document.createElement('input');
        nameInput.type = 'text';
        nameInput.name = 'guest';
        nameInput.id = 'guest-id';
        nameInput.placeholder = 'Name';
        nameInput.className = 'form-control';
        inputDiv.appendChild(nameInput);
        mainDiv.appendChild(inputDiv);

        var radioDiv = document.createElement('div');
        radioDiv.className = 'row container-fluid';

        var correctDiv = document.createElement('div');
        correctDiv.className = 'form-check form-check-inline';
        var correctInput = document.createElement('input');
        correctInput.type = 'radio';
        correctInput.name = 'radio-guest' + counter;
        correctInput.id = 'correct-guest' + counter;
        correctInput.value = 'correct';
        correctInput.className = 'form-check-input';
        correctDiv.appendChild(correctInput);
        var correctLabel = document.createElement('label');
        correctLabel.htmlFor = 'correct-guest' + counter;
        correctLabel.className = 'form-check-label';
        correctLabel.textContent = 'Correct';
        correctDiv.appendChild(correctLabel);
        radioDiv.appendChild(correctDiv);

        var incorrectDiv = document.createElement('div');
        incorrectDiv.className = 'form-check form-check-inline';
        var incorrectInput = document.createElement('input');
        incorrectInput.type = 'radio';
        incorrectInput.name = 'radio-guest' + counter;
        incorrectInput.id = 'incorrect-guest' + counter;
        incorrectInput.value = 'incorrect';
        incorrectInput.className = 'form-check-input';
        incorrectDiv.appendChild(incorrectInput);
        var incorrectLabel = document.createElement('label');
        incorrectLabel.htmlFor = 'incorrect-guest' + counter;
        incorrectLabel.className = 'form-check-label';
        incorrectLabel.textContent = 'Incorrect';
        incorrectDiv.appendChild(incorrectLabel);
        radioDiv.appendChild(incorrectDiv);

        var absentDiv = document.createElement('div');
        absentDiv.className = 'form-check form-check-inline';
        var absentInput = document.createElement('input');
        absentInput.type = 'radio';
        absentInput.name = 'radio-guest' + counter;
        absentInput.id = 'absent-guest' + counter;
        absentInput.value = 'absent';
        absentInput.className = 'form-check-input';
        absentDiv.appendChild(absentInput);
        var absentLabel = document.createElement('label');
        absentLabel.htmlFor = 'absent-guest' + counter;
        absentLabel.className = 'form-check-label';
        absentLabel.textContent = 'Absent';
        absentDiv.appendChild(absentLabel);
        radioDiv.appendChild(absentDiv);

        var presenterDiv = document.createElement('div');
        presenterDiv.className = 'form-check form-check-inline';
        var presenterInput = document.createElement('input');
        presenterInput.type = 'radio';
        presenterInput.name = 'radio-guest' + counter;
        presenterInput.id = 'presenter-guest' + counter;
        presenterInput.value = 'presenter';
        presenterInput.className = 'form-check-input';
        presenterDiv.appendChild(presenterInput);
        var presenterLabel = document.createElement('label');
        presenterLabel.htmlFor = 'presenter-guest' + counter;
        presenterLabel.className = 'form-check-label';
        presenterLabel.textContent = 'Presenter';
        presenterDiv.appendChild(presenterLabel);
        radioDiv.appendChild(presenterDiv);

        mainDiv.appendChild(radioDiv);
        form.appendChild(mainDiv);
        form.appendChild(document.createElement('br'));
    };
</script>